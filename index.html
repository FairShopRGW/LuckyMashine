<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Neon Slots - Risiko & Highstake Edition</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap');

        :root {
            --neon-color: #ff00ff;
            --bg-color: #050505;
            --panel-bg: #1a1a1a;
            --risk-color: #ff3333;
            --take-color: #33ff33;
        }

        body {
            background-color: var(--bg-color);
            color: white;
            font-family: 'Orbitron', sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            overflow: hidden;
            user-select: none;
        }

        .casino-container {
            background: var(--panel-bg);
            padding: 30px;
            border: 2px solid var(--neon-color);
            border-radius: 20px;
            box-shadow: 0 0 20px var(--neon-color), inset 0 0 10px var(--neon-color);
            text-align: center;
            position: relative;
            width: 420px;
        }

        h1 {
            text-transform: uppercase;
            text-shadow: 0 0 10px var(--neon-color);
            margin: 0 0 15px 0;
            font-size: 1.8rem;
        }

        .stats {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
            font-size: 1rem;
            background: #000;
            padding: 10px;
            border-radius: 5px;
            border: 1px solid #333;
        }

        /* Einsatz-Bereich */
        .bet-container {
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .bet-input {
            width: 80px;
            background: #000;
            border: 1px solid var(--neon-color);
            color: white;
            padding: 5px;
            font-family: 'Orbitron';
            text-align: center;
        }

        .slot-machine {
            display: flex;
            justify-content: space-between;
            background: black;
            padding: 10px;
            border-radius: 10px;
            border: 1px solid #333;
            margin-bottom: 15px;
            height: 100px;
        }

        .reel {
            width: 30%;
            background: #222;
            border: 1px solid var(--neon-color);
            border-radius: 5px;
            font-size: 2.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .spinning span { animation: blurText 0.1s infinite; }
        @keyframes blurText {
            0% { transform: translateY(-5px); filter: blur(2px); }
            100% { transform: translateY(5px); filter: blur(2px); }
        }

        button {
            background: transparent;
            color: var(--neon-color);
            border: 2px solid var(--neon-color);
            padding: 12px;
            font-family: 'Orbitron';
            font-weight: bold;
            cursor: pointer;
            transition: 0.2s;
            border-radius: 5px;
            text-transform: uppercase;
        }

        button:hover:not(:disabled) {
            background: var(--neon-color);
            color: black;
            box-shadow: 0 0 20px var(--neon-color);
        }

        button:disabled { opacity: 0.3; cursor: not-allowed; }

        /* Risiko Bereich */
        .risk-area {
            margin-top: 15px;
            border-top: 1px solid #333;
            padding-top: 15px;
            display: none;
        }

        .risk-card { font-size: 3.5rem; margin: 5px 0; }
        .risk-btn { border-color: var(--risk-color); color: var(--risk-color); }
        .risk-btn:hover { background: var(--risk-color) !important; color: white !important; }
        .take-btn { border-color: var(--take-color); color: var(--take-color); }
        .take-btn:hover { background: var(--take-color) !important; color: black !important; }

        .overlay {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.95); display: flex; flex-direction: column;
            justify-content: center; align-items: center; z-index: 10;
        }
        .hidden { display: none !important; }

        .settings-btn { position: absolute; top: 10px; right: 10px; border: none; font-size: 1.2rem; }
        
        .reset-btn {
            margin-top: 30px;
            border-color: #ff3333;
            color: #ff3333;
            font-size: 0.7rem;
        }

        #message-area { height: 25px; margin-bottom: 10px; font-size: 0.9rem; }
    </style>
</head>
<body>

    <div id="login-overlay" class="overlay">
        <h1 style="color: var(--neon-color)">NEON SLOTS</h1>
        <input type="text" id="username" placeholder="Dein Name" style="padding:10px; margin-bottom:10px; background:#000; color:white; border:1px solid var(--neon-color); font-family:'Orbitron'">
        <button onclick="login()">Start Game</button>
    </div>

    <div id="settings-overlay" class="overlay hidden">
        <h2>Einstellungen</h2>
        <div style="display:flex; gap:10px;">
            <div style="width:30px; height:30px; background:#ff00ff; cursor:pointer;" onclick="changeColor('#ff00ff')"></div>
            <div style="width:30px; height:30px; background:#00ffff; cursor:pointer;" onclick="changeColor('#00ffff')"></div>
            <div style="width:30px; height:30px; background:#00ff00; cursor:pointer;" onclick="changeColor('#00ff00')"></div>
        </div>
        <button class="reset-btn" onclick="resetAccount()">Account zur√ºcksetzen</button>
        <br>
        <button onclick="toggleSettings()">Schlie√üen</button>
    </div>

    <div class="casino-container">
        <button class="settings-btn" onclick="toggleSettings()">‚öôÔ∏è</button>
        <h1>Neon Slots</h1>
        
        <div class="stats">
            <div>Spieler: <span id="player-name" style="color:var(--neon-color)">?</span></div>
            <div>Bank: <span id="money">100</span>‚Ç¨</div>
        </div>

        <div class="bet-container" id="bet-box">
            <label>Einsatz:</label>
            <input type="number" id="bet-amount" class="bet-input" value="10" min="1">
            <span>‚Ç¨</span>
        </div>

        <div class="slot-machine">
            <div class="reel" id="reel1"><span>üçí</span></div>
            <div class="reel" id="reel2"><span>üçã</span></div>
            <div class="reel" id="reel3"><span>üíé</span></div>
        </div>

        <div id="message-area">Bereit zum Drehen!</div>

        <div id="main-controls">
            <button id="spin-btn" onclick="spin()" style="width: 100%;">SPIN</button>
        </div>

        <div class="risk-area" id="risk-controls">
            <div style="font-size: 0.8rem;">RISIKO-GEWINN:</div>
            <div style="font-size: 1.4rem; color: #fff; margin-bottom: 5px;">
                <span id="current-win-amount">0</span>‚Ç¨
            </div>
            <div id="card-display" class="risk-card">‚ùì</div>
            <div style="display:flex; gap:10px; justify-content:center;">
                <button class="take-btn" onclick="collectWin()">NEHMEN</button>
                <button class="risk-btn" onclick="gamble()">RISIKO (x2)</button>
            </div>
        </div>
    </div>

    <script>
        const symbols = ['üçí', 'üçã', 'üçá', 'üíé', '7Ô∏è‚É£', 'üîî'];
        let money = 100;
        let currentWin = 0;
        let currentUser = null;
        
        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();

        function updateUI() {
            document.getElementById('money').innerText = money;
            document.getElementById('current-win-amount').innerText = currentWin;
            if(currentUser) {
                localStorage.setItem('neonSlot_' + currentUser, money);
            }
        }

        async function spin() {
            const betInput = document.getElementById('bet-amount');
            const bet = parseInt(betInput.value);

            if (isNaN(bet) || bet <= 0) {
                alert("Bitte g√ºltigen Einsatz w√§hlen!"); return;
            }
            if (money < bet) {
                document.getElementById('message-area').innerText = "Zu wenig Geld!";
                return;
            }

            money -= bet;
            updateUI();
            
            document.getElementById('spin-btn').disabled = true;
            document.getElementById('bet-box').style.opacity = "0.5";
            betInput.disabled = true;
            document.getElementById('message-area').innerText = "Viel Gl√ºck...";

            const reels = [document.getElementById('reel1'), document.getElementById('reel2'), document.getElementById('reel3')];
            reels.forEach(r => r.classList.add('spinning'));

            let results = [];
            for (let i = 0; i < 3; i++) {
                await new Promise(r => setTimeout(r, 500 + (i * 300)));
                reels[i].classList.remove('spinning');
                const sym = symbols[Math.floor(Math.random() * symbols.length)];
                reels[i].innerHTML = `<span>${sym}</span>`;
                results.push(sym);
            }

            checkWin(results, bet);
        }

        function checkWin(results, bet) {
            const [r1, r2, r3] = results;
            let winMultiplier = 0;

            if (r1 === r2 && r2 === r3) {
                winMultiplier = (r1 === '7Ô∏è‚É£') ? 50 : (r1 === 'üíé' ? 20 : 10);
            } else if (r1 === r2 || r2 === r3 || r1 === r3) {
                winMultiplier = 2;
            }

            if (winMultiplier > 0) {
                currentWin = bet * winMultiplier;
                document.getElementById('message-area').innerText = `GEWINN: ${currentWin}‚Ç¨! Risiko?`;
                document.getElementById('message-area').style.color = "#00ff00";
                showRiskMode();
            } else {
                document.getElementById('message-area').innerText = "Leider nichts.";
                document.getElementById('spin-btn').disabled = false;
                document.getElementById('bet-box').style.opacity = "1";
                document.getElementById('bet-amount').disabled = false;
            }
        }

        function showRiskMode() {
            document.getElementById('main-controls').classList.add('hidden');
            document.getElementById('risk-controls').style.display = 'block';
            document.getElementById('card-display').innerText = "‚ùì";
            updateUI();
        }

        function collectWin() {
            money += currentWin;
            currentWin = 0;
            document.getElementById('message-area').innerText = "Gewinn gesichert!";
            document.getElementById('message-area').style.color = "white";
            endRiskMode();
        }

        async function gamble() {
            const card = document.getElementById('card-display');
            card.innerText = "‚è≥";
            
            await new Promise(r => setTimeout(r, 600));

            if (Math.random() > 0.5) {
                currentWin *= 2;
                card.innerText = "‚úÖ";
                document.getElementById('message-area').innerText = "VERDOPPELT!";
                updateUI();
            } else {
                currentWin = 0;
                card.innerText = "‚ùå";
                document.getElementById('message-area').innerText = "ALLES WEG!";
                document.getElementById('message-area').style.color = "red";
                updateUI();
                setTimeout(endRiskMode, 1200);
            }
        }

        function endRiskMode() {
            document.getElementById('risk-controls').style.display = 'none';
            document.getElementById('main-controls').classList.remove('hidden');
            document.getElementById('spin-btn').disabled = false;
            document.getElementById('bet-box').style.opacity = "1";
            document.getElementById('bet-amount').disabled = false;
            updateUI();
        }

        function login() {
            const val = document.getElementById('username').value.trim();
            if (!val) return alert("Name eingeben!");
            currentUser = val;
            document.getElementById('player-name').innerText = currentUser;
            document.getElementById('login-overlay').classList.add('hidden');
            const saved = localStorage.getItem('neonSlot_' + currentUser);
            if (saved) money = parseInt(saved);
            updateUI();
        }

        function resetAccount() {
            if(confirm("Willst du deinen Account wirklich l√∂schen? Dein Geld wird auf 100‚Ç¨ zur√ºckgesetzt.")) {
                localStorage.removeItem('neonSlot_' + currentUser);
                location.reload();
            }
        }

        function toggleSettings() { document.getElementById('settings-overlay').classList.toggle('hidden'); }
        function changeColor(c) { document.documentElement.style.setProperty('--neon-color', c); }
    </script>
</body>
</html>
